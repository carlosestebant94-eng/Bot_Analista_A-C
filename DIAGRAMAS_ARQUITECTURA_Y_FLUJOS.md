# ğŸ—ï¸ DIAGRAMAS DE ARQUITECTURA Y FLUJOS

## VisualizaciÃ³n Completa del Sistema

---

## DIAGRAMA 1: ARQUITECTURA DE LOS 5 PILARES

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     BOT ANALISTA A&C - ARCHITECTURE                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              USUARIO (Telegram)
                                      â”‚
                                      â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   TELEGRAM BOT INTERFACE         â”‚
                    â”‚  â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â”‚
                    â”‚ PILAR 4: ğŸ¤– Handlers            â”‚
                    â”‚ â€¢ /start, /ayuda, /status      â”‚
                    â”‚ â€¢ /analizar, /cargar_pdfs      â”‚
                    â”‚ â€¢ Procesamiento de entrada     â”‚
                    â”‚ â€¢ GestiÃ³n de contexto          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚              â”‚              â”‚
                â–¼              â–¼              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ PILAR 1:     â”‚ â”‚ PILAR 2:     â”‚ â”‚ PILAR 3:     â”‚
        â”‚ ğŸ§  CEREBRO   â”‚ â”‚ ğŸ“Š ANÃLISIS  â”‚ â”‚ ğŸ–¼ï¸ VISIÃ“N    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ Knowledge    â”‚ â”‚ Analyzer     â”‚ â”‚ ImageProc    â”‚
        â”‚ Base ğŸ—„ï¸      â”‚ â”‚ Engine ğŸ”§    â”‚ â”‚ OCR ğŸ“¸       â”‚
        â”‚              â”‚ â”‚              â”‚ â”‚              â”‚
        â”‚ â€¢ PDF Input  â”‚ â”‚ â€¢ Indicators â”‚ â”‚ â€¢ Tesseract  â”‚
        â”‚ â€¢ SQLite DB  â”‚ â”‚ â€¢ Technical  â”‚ â”‚ â€¢ OpenCV     â”‚
        â”‚ â€¢ BÃºsqueda   â”‚ â”‚ â€¢ Signals    â”‚ â”‚ â€¢ Colores    â”‚
        â”‚ â€¢ CachÃ©      â”‚ â”‚ â€¢ yfinance   â”‚ â”‚ â€¢ Formas     â”‚
        â”‚ â€¢ Aprendizajeâ”‚ â”‚ â€¢ ta lib     â”‚ â”‚ â€¢ GrÃ¡ficos   â”‚
        â”‚              â”‚ â”‚ â€¢ Confianza  â”‚ â”‚ â€¢ Patterns   â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                â”‚                â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                    PILAR 5: ğŸ—ï¸ ARQUITECTURA
                    â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”
                    â€¢ config/settings.py
                    â€¢ utils/logger.py
                    â€¢ utils/validators.py
                    â€¢ Estructura de directorios
                    â€¢ ConfiguraciÃ³n centralizada
                    â€¢ Logging y debugging
                    â€¢ Manejo de errores
                    â€¢ Persistencia (SQLite)
                                â”‚
                                â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  DATA & PERSISTENCE      â”‚
                    â”‚  â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â–”â”‚
                    â”‚  SQLite Database        â”‚
                    â”‚  â€¢ documentos           â”‚
                    â”‚  â€¢ conocimiento         â”‚
                    â”‚  â€¢ anÃ¡lisis_realizados  â”‚
                    â”‚  â€¢ aprendizajes         â”‚
                    â”‚                         â”‚
                    â”‚  JSON Files            â”‚
                    â”‚  â€¢ Cache               â”‚
                    â”‚  â€¢ Reportes            â”‚
                    â”‚                         â”‚
                    â”‚  Logs                  â”‚
                    â”‚  â€¢ bot_analista.log    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## DIAGRAMA 2: FLUJO DE DATOS - ANÃLISIS COMPLETO

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   FLUJO: Usuario pide /analizar AAPL                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Telegram User
    â”‚
    â””â”€â†’ /analizar AAPL
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ TelegramAnalystBot  â”‚
    â”‚ comando_analizar()  â”‚
    â”‚ âœ“ Validar ticker   â”‚
    â”‚ âœ“ Mostrar â³       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Analyzer                 â”‚
    â”‚ analizar_ticker(AAPL)    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                  â”‚              â”‚              â”‚
    â–¼                  â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚yfinance  â”‚   â”‚Indicadores   â”‚  â”‚KnowledgeBase â”‚  â”‚Confianza    â”‚
â”‚datos 1y  â”‚   â”‚TÃ©cnicos      â”‚  â”‚BÃºsqueda      â”‚  â”‚CÃ¡lculo      â”‚
â”‚AAPL      â”‚   â”‚â€¢ RSI         â”‚  â”‚"AAPL"        â”‚  â”‚Promedio     â”‚
â”‚          â”‚   â”‚â€¢ MACD        â”‚  â”‚              â”‚  â”‚             â”‚
â”‚ âœ“precio  â”‚   â”‚â€¢ Bollinger   â”‚  â”‚ âœ“Resultados  â”‚  â”‚ âœ“Score 0.7  â”‚
â”‚ âœ“cambio  â”‚   â”‚â€¢ ATR         â”‚  â”‚              â”‚  â”‚             â”‚
â”‚ âœ“volumen â”‚   â”‚              â”‚  â”‚ âœ“Confianza   â”‚  â”‚             â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚               â”‚                 â”‚              â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ Compilar Resultado      â”‚
          â”‚ {                       â”‚
          â”‚  ticker: "AAPL",        â”‚
          â”‚  precio: 150.25,        â”‚
          â”‚  indicadores: {...},    â”‚
          â”‚  seÃ±ales: {...},        â”‚
          â”‚  recomendacion: "...",  â”‚
          â”‚  confianza: 0.72,       â”‚
          â”‚  timestamp: "2024-..."  â”‚
          â”‚ }                       â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ KnowledgeManager     â”‚
          â”‚ registrar_analisis() â”‚
          â”‚ â€¢ Guardar en BD      â”‚
          â”‚ â€¢ Log en archivo     â”‚
          â”‚ â€¢ Aprender patrones  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ Formatear Respuesta  â”‚
          â”‚ Markdown + Emojis    â”‚
          â”‚ â€¢ ğŸ“Š Indicadores    â”‚
          â”‚ â€¢ ğŸ¯ SeÃ±ales        â”‚
          â”‚ â€¢ ğŸ’¡ RecomendaciÃ³n  â”‚
          â”‚ â€¢ âœ… Confianza      â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ Enviar a Telegram    â”‚
          â”‚ update.message.      â”‚
          â”‚ reply_text()         â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
          Usuario recibe anÃ¡lisis
          ğŸ“Š AAPL | $150.25 | +2.3%...
```

---

## DIAGRAMA 3: CICLO DE VIDA DEL BOT

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CICLO DE VIDA DEL BOT                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    INICIO
                      â”‚
                      â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 1. INICIALIZACIÃ“N       â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ â€¢ Crear directorios     â”‚
        â”‚ â€¢ Cargar .env           â”‚
        â”‚ â€¢ Inicializar logger    â”‚
        â”‚ â€¢ Crear BD              â”‚
        â”‚ â€¢ Validar config        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 2. CREAR BOT            â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ â€¢ Instanciar mÃ³dulos    â”‚
        â”‚ â€¢ Conectar Telegram API â”‚
        â”‚ â€¢ Registrar handlers    â”‚
        â”‚ â€¢ Preparar callbacks    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 3. ESCUCHAR (POLLING)   â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ Esperando mensajes...   â”‚
        â”‚ Cada 1-2 segundos:      â”‚
        â”‚ â€¢ Llamar Telegram API   â”‚
        â”‚ â€¢ Verificar nuevos msg  â”‚
        â”‚ â€¢ Ejecutar handlers     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
            â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
            â”‚          â”‚
         MENSAJE    TIMEOUT
            â”‚          â”‚
            â–¼          â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Handler  â”‚ â”‚ Retry    â”‚
        â”‚ activado â”‚ â”‚ API      â”‚
        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 4. PROCESAR COMANDO    â”‚
        â”‚ â€¢ Validar entrada      â”‚
        â”‚ â€¢ Ejecutar lÃ³gica      â”‚
        â”‚ â€¢ Responder usuario    â”‚
        â”‚ â€¢ Registrar en log     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
            â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
            â”‚          â”‚
           OK        ERROR
            â”‚          â”‚
            â–¼          â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Siguienteâ”‚  â”‚ Error        â”‚
        â”‚ mensaje  â”‚  â”‚ Handler      â”‚
        â”‚          â”‚  â”‚ Responder:   â”‚
        â”‚ â†’ PASO 3 â”‚  â”‚ "âŒ Error... â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼ (Log error)
                        â†’ PASO 3 (continuar)
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼ (Si CTRL+C o error fatal)
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 5. SHUTDOWN              â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ â€¢ Guardar estado         â”‚
        â”‚ â€¢ Cerrar conexiones      â”‚
        â”‚ â€¢ Cerrar logger          â”‚
        â”‚ â€¢ Desconectar BD         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
                 FIN
```

---

## DIAGRAMA 4: INTERACCIONES ENTRE PILARES

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          INTERACCIONES ENTRE LOS 5 PILARES                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                           USUARIO
                              â”‚
                              â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚  BOT ğŸ¤– â”‚ (PILAR 4)
                         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚         â”‚         â”‚
                    â–¼         â–¼         â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚    TIPO DE ENTRADA    â”‚
                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â•±    â”‚    â•²
                 TEXTO  IMAGEN PDF
                   â”‚       â”‚     â”‚
                   â–¼       â–¼     â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ANÃLISISâ”‚ â”‚ VISIÃ“N   â”‚ â”‚ CEREBRO  â”‚
              â”‚PILAR 2 â”‚ â”‚ PILAR 3  â”‚ â”‚ PILAR 1  â”‚
              â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                  â”‚           â”‚            â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
         â”‚                â”‚            â”‚   â”‚
         â–¼                â–¼            â–¼   â–¼
   [yfinance]       [OpenCV]      [SQLite]
   [Indicadores]    [Tesseract]    [BÃºsqueda]
   [SeÃ±ales]        [Colores]      [Aprendizaje]
         â”‚                â”‚            â”‚   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”˜
                          â”‚
                    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                    â”‚ ARQUITECTURA
                    â”‚ PILAR 5 ğŸ—ï¸  â”‚
                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                    â”‚â€¢ Config   â”‚
                    â”‚â€¢ Logger   â”‚
                    â”‚â€¢ Utils    â”‚
                    â”‚â€¢ Cache    â”‚
                    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ RESPUESTA   â”‚
                    â”‚ FORMATEADA  â”‚
                    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                    USUARIO RECIBE
                    ANÃLISIS/RESULTADO
```

---

## DIAGRAMA 5: ESTRUCTURA DE CARPETAS - VISTA EN ÃRBOL

```
proyecto_bot/
â”‚
â”œâ”€â”€ ğŸ“ config/                      â† PILLAR 5: ConfiguraciÃ³n
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ settings.py                 [60 lÃ­neas, punto crÃ­tico]
â”‚
â”œâ”€â”€ ğŸ“ utils/                       â† PILLAR 5: Utilidades
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ logger.py                   [40 lÃ­neas, logging]
â”‚   â”œâ”€â”€ validators.py               [30 lÃ­neas, validaciÃ³n]
â”‚   â””â”€â”€ exceptions.py               [20 lÃ­neas, excepciones]
â”‚
â”œâ”€â”€ ğŸ“ cerebro/                     â† PILAR 1: Knowledge Base
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ knowledge_manager.py        [150 lÃ­neas, BD core]
â”‚   â””â”€â”€ pdf_processor.py            [80 lÃ­neas, procesamiento]
â”‚
â”œâ”€â”€ ğŸ“ analisis/                    â† PILAR 2: Analytics Engine
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ analyzer.py                 [200 lÃ­neas, motor core]
â”‚   â”œâ”€â”€ technical_analyzer.py       [150 lÃ­neas, indicadores]
â”‚   â”œâ”€â”€ fundamental_analyzer.py     [100 lÃ­neas, fundamental]
â”‚   â””â”€â”€ data_manager.py             [80 lÃ­neas, datos]
â”‚
â”œâ”€â”€ ğŸ“ telegram_bot/                â† PILAR 4: Bot Interface
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ bot.py                      [250 lÃ­neas, handlers]
â”‚
â”œâ”€â”€ ğŸ“ ia/                          â† PILAR 5: IA Integration
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ ai_engine.py                [100 lÃ­neas, Gemini]
â”‚
â”œâ”€â”€ ğŸ“ data/                        â† PERSISTENCIA
â”‚   â”œâ”€â”€ bot_database.db             [SQLite - CRÃTICO]
â”‚   â”œâ”€â”€ ğŸ“ reportes/                [PDFs generados]
â”‚   â””â”€â”€ ğŸ“ cache/                   [Datos cacheados]
â”‚
â”œâ”€â”€ ğŸ“ pdfs/                        â† ENTRADA DE DATOS
â”‚   â”œâ”€â”€ documento1.pdf
â”‚   â”œâ”€â”€ documento2.pdf
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ ğŸ“ logs/                        â† DEBUGGING
â”‚   â””â”€â”€ bot_analista.log            [Log de todo]
â”‚
â”œâ”€â”€ ğŸ“ tests/                       â† CALIDAD
â”‚   â””â”€â”€ test_basico.py
â”‚
â”œâ”€â”€ ğŸ“„ main.py                      â† ENTRADA PRINCIPAL [30 lÃ­neas]
â”œâ”€â”€ ğŸ“„ .env                         â† SECRETOS (no commitear)
â”œâ”€â”€ ğŸ“„ .env.example                 â† TEMPLATE
â”œâ”€â”€ ğŸ“„ .gitignore
â”œâ”€â”€ ğŸ“„ requirements.txt              â† DEPENDENCIAS [30 paquetes]
â”‚
â””â”€â”€ ğŸ“„ DOCUMENTACIÃ“N/               â† CONOCIMIENTO
    â”œâ”€â”€ PILARES_FUNDAMENTALES.md
    â”œâ”€â”€ ESPECIFICACIONES_TECNICAS.md
    â”œâ”€â”€ CASOS_DE_USO_EJEMPLOS.md
    â”œâ”€â”€ GUIA_REPLICACION_PASO_A_PASO.md
    â”œâ”€â”€ TROUBLESHOOTING_Y_DIAGRAMA_DECISIONES.md
    â””â”€â”€ INDICE_MAESTRO.md


ESTADÃSTICAS:
â”œâ”€ Total archivos Python: 12
â”œâ”€ Total lÃ­neas de cÃ³digo: ~1500
â”œâ”€ Total lÃ­neas de documentaciÃ³n: ~5000
â”œâ”€ Ratio doc:cÃ³digo: 3:1
â””â”€ Complejidad ciclomÃ¡tica: Baja
```

---

## DIAGRAMA 6: FLUJO DE CARGA DE PDFS Y ENTRENAMIENTO

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        FLUJO: Usuario ejecuta /cargar_pdfs               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Telegram: /cargar_pdfs
    â”‚
    â–¼
TelegramAnalystBot.comando_cargar_pdfs()
    â”‚
    â”œâ”€â†’ Mostrar: "â³ Cargando PDFs..."
    â”‚
    â–¼
PDFProcessor.procesar_todos_pdfs()
    â”‚
    â”œâ”€â†’ Iterar: pdfs/ directorio
    â”‚
    â”œâ”€â†’ Para cada PDF:
    â”‚   â”œâ”€â†’ procesar_pdf(archivo)
    â”‚   â”‚   â”œâ”€â†’ pdfplumber.open()
    â”‚   â”‚   â”œâ”€â†’ Extraer texto (todas las pÃ¡ginas)
    â”‚   â”‚   â”œâ”€â†’ Extraer tablas
    â”‚   â”‚   â””â”€â†’ Retornar: {nombre, texto, tablas, metadatos}
    â”‚   â”‚
    â”‚   â””â”€â†’ KnowledgeManager.cargar_documento()
    â”‚       â”œâ”€â†’ INSERT INTO documentos
    â”‚       â”‚   nombre, contenido, metadata
    â”‚       â”‚
    â”‚       â””â”€â†’ De contenido extraer TEMAS
    â”‚           Para cada tema:
    â”‚           â””â”€â†’ KnowledgeManager.agregar_conocimiento()
    â”‚               â”œâ”€â†’ Extraer texto por tema
    â”‚               â”œâ”€â†’ Calcular relevancia (0-1)
    â”‚               â””â”€â†’ INSERT INTO conocimiento
    â”‚                   tema, contenido, relevancia, doc_id
    â”‚
    â–¼
KnowledgeManager.registrar_aprendizaje()
    â”œâ”€â†’ Analizar patrones en documentos
    â”œâ”€â†’ Calcular frecuencia de tÃ©rminos
    â””â”€â†’ INSERT INTO aprendizajes


RESULTADO EN BD:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DOCUMENTOS:                                      â”‚
â”‚ â”œâ”€ documento1.pdf (3 pÃ¡ginas)                    â”‚
â”‚ â”œâ”€ documento2.pdf (5 pÃ¡ginas)                    â”‚
â”‚ â””â”€ documento3.pdf (2 pÃ¡ginas)                    â”‚
â”‚                                                  â”‚
â”‚ CONOCIMIENTO:                                    â”‚
â”‚ â”œâ”€ Tema: "AnÃ¡lisis tÃ©cnico"                     â”‚
â”‚ â”‚  Relevancia: 0.92                             â”‚
â”‚ â”‚  Documento: documento1.pdf                    â”‚
â”‚ â”‚                                                â”‚
â”‚ â”œâ”€ Tema: "RSI y MACD"                            â”‚
â”‚ â”‚  Relevancia: 0.85                             â”‚
â”‚ â”‚  Documento: documento1.pdf                    â”‚
â”‚ â”‚                                                â”‚
â”‚ â””â”€ Tema: "Estrategias de trading"                â”‚
â”‚    Relevancia: 0.78                             â”‚
â”‚    Documento: documento2.pdf                    â”‚
â”‚                                                  â”‚
â”‚ APRENDIZAJES:                                    â”‚
â”‚ â”œâ”€ "RSI" frecuencia: 47, validez: 0.88         â”‚
â”‚ â”œâ”€ "MACD" frecuencia: 32, validez: 0.82        â”‚
â”‚ â””â”€ "Soporte" frecuencia: 28, validez: 0.79     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Telegram: âœ… 3 PDFs cargados
            ğŸ’¾ Cerebro entrenado con Ã©xito
            ğŸ“š 10 temas identificados
            ğŸ“Š Aprendido 15 patrones
```

---

## DIAGRAMA 7: ARQUITECTURA DE CAPAS (MVC-LIKE)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ARQUITECTURA EN CAPAS (MODEL-VIEW-CONTROL)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CAPA PRESENTACIÃ“N (View)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    TelegramAnalystBot (bot.py)    â”‚
â”‚  â€¢ Handlers de comandos           â”‚
â”‚  â€¢ Formateo de respuestas         â”‚
â”‚  â€¢ Interfaz usuario               â”‚
â”‚  â€¢ ValidaciÃ³n de entrada          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
CAPA DE CONTROL (Controller)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    OrquestaciÃ³n de MÃ³dulos        â”‚
â”‚  â€¢ Coordinar requests             â”‚
â”‚  â€¢ Compilar resultados            â”‚
â”‚  â€¢ Manejo de errores              â”‚
â”‚  â€¢ Logging de operaciones         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚             â”‚          â”‚
      â–¼             â–¼          â–¼
CAPA DE LÃ“GICA DE NEGOCIO (Model)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Analyzer    â”‚ â”‚ ImageProc    â”‚ â”‚ KnowledgeMgr â”‚
â”‚  â€¢ Calcular  â”‚ â”‚ â€¢ Procesar   â”‚ â”‚ â€¢ Buscar     â”‚
â”‚  â€¢ Indicadoresâ”‚ â”‚   imÃ¡genes   â”‚ â”‚ â€¢ Aprender   â”‚
â”‚  â€¢ SeÃ±ales   â”‚ â”‚ â€¢ Extraer    â”‚ â”‚ â€¢ Registrar  â”‚
â”‚              â”‚ â”‚   texto      â”‚ â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚             â”‚          â”‚
      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
CAPA DE DATOS (Data)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Data Access Objects            â”‚
â”‚  â€¢ SQLite                         â”‚
â”‚  â€¢ JSON Cache                     â”‚
â”‚  â€¢ File System                    â”‚
â”‚  â€¢ External APIs                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
        PERSISTENCIA
    â”œâ”€ SQLite Database
    â”œâ”€ JSON Files
    â”œâ”€ Log Files
    â””â”€ PDF Files
```

---

## DIAGRAMA 8: MATRIZ DE DEPENDENCIAS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         MATRIZ DE DEPENDENCIAS ENTRE MÃ“DULOS              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

MÃ³dulo              â”‚ Depende de          â”‚ Dependencias â”‚ CrÃ­tico
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€
main.py             â”‚ config, logger, bot â”‚ 3            â”‚ âœ“ SÃ­
config/settings.py  â”‚ (ninguno)           â”‚ 0            â”‚ âœ“ SÃ­
utils/logger.py     â”‚ config              â”‚ 1            â”‚ âœ“ SÃ­
utils/validators.py â”‚ (ninguno)           â”‚ 0            â”‚ No
cerebro/KM          â”‚ logger, config      â”‚ 2            â”‚ SÃ­
cerebro/PDF         â”‚ logger, config      â”‚ 2            â”‚ SÃ­
analisis/Analyzer   â”‚ logger, config, yf  â”‚ 3            â”‚ SÃ­
analisis/ImageProc  â”‚ logger, config, cv2 â”‚ 3            â”‚ No
telegram_bot/bot    â”‚ Todos los mÃ³dulos   â”‚ 8            â”‚ âœ“ SÃ­
ia/AIEngine         â”‚ logger, config      â”‚ 2            â”‚ No


ÃRBOL DE DEPENDENCIAS:
                    main.py
                      â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚            â”‚            â”‚
    config/s.py    logger.py      bot.py
         â”‚            â”‚            â”‚
         â”‚            â”‚        â”Œâ”€â”€â”€â”¼â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”
         â”‚            â”‚        â”‚   â”‚   â”‚       â”‚
         â”‚            â”‚        â”‚   â”‚   â”‚       â”‚
         â”‚      config/s.py    â”‚   â”‚   â”‚       â”‚
         â”‚            â”‚        â”‚   â”‚   â”‚       â”‚
         â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€â”€â”€â”¤â”€â”€â”€â”¤â”€â”€â”€â”   â”‚
         â”‚                     â”‚   â”‚   â”‚   â”‚   â”‚
         â”‚              (todos los mÃ³dulos)    â”‚
         â”‚                                 ia/
         â”‚
         â””â”€ PUNTO CRÃTICO


CICLO POTENCIAL DE DEPENDENCIAS: NINGUNO (AcÃ­clico) âœ“
COMPLEJIDAD: BAJA (Max 3 niveles)
MANTENIBILIDAD: ALTA (Desacoplado)
```

---

## DIAGRAMA 9: FLUJO DE ERRORES Y RECUPERACIÃ“N

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       FLUJO DE MANEJO DE ERRORES Y RECUPERACIÃ“N          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

OPERACIÃ“N NORMAL
    â”‚
    â–¼
try:
    Ejecutar operaciÃ³n
    â”‚
    â”œâ”€ OK â†’ Registrar Ã©xito â†’ Retornar resultado
    â”‚
    â””â”€ ERROR
         â”‚
         â–¼
    except ValidationError:
    â”‚   â”œâ”€ Registrar: WARNING
    â”‚   â”œâ”€ Mensaje: "âš ï¸ ValidaciÃ³n fallida"
    â”‚   â””â”€ AcciÃ³n: Pedir reintentar
    â”‚
    â”œâ”€ except DatabaseError:
    â”‚   â”œâ”€ Registrar: ERROR
    â”‚   â”œâ”€ Mensaje: "âŒ Error en BD"
    â”‚   â”œâ”€ AcciÃ³n: Retry 3 veces
    â”‚   â””â”€ Si falla: Error fatal
    â”‚
    â”œâ”€ except AnalysisError:
    â”‚   â”œâ”€ Registrar: ERROR
    â”‚   â”œâ”€ Mensaje: "âŒ AnÃ¡lisis no disponible"
    â”‚   â””â”€ AcciÃ³n: Ofrecer alternativa
    â”‚
    â”œâ”€ except ConnectionError:
    â”‚   â”œâ”€ Registrar: WARNING
    â”‚   â”œâ”€ Mensaje: "âš ï¸ Sin conexiÃ³n"
    â”‚   â””â”€ AcciÃ³n: Retry automÃ¡tico
    â”‚
    â””â”€ except Exception:
        â”œâ”€ Registrar: ERROR CRÃTICO
        â”œâ”€ Mensaje: "âŒ Error inesperado"
        â””â”€ AcciÃ³n: Contactar admin
            â”‚
            â–¼
        finally:
        â”œâ”€ Limpiar recursos
        â”œâ”€ Cerrar conexiones
        â”œâ”€ Log completo
        â””â”€ Notificar usuario


LOG TÃPICO:
2024-01-15 14:32:05 - bot_analista - INFO - Iniciando anÃ¡lisis AAPL
2024-01-15 14:32:06 - bot_analista - INFO - Datos descargados OK
2024-01-15 14:32:07 - bot_analista - ERROR - ValueError en indicador RSI
2024-01-15 14:32:07 - bot_analista - INFO - Recuperando: usando defecto
2024-01-15 14:32:08 - bot_analista - INFO - AnÃ¡lisis completado con Ã©xito


MATRIZ DE ACCIONES POR TIPO DE ERROR:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Error        â”‚ Severidadâ”‚ AcciÃ³n           â”‚ Retry   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ValidaciÃ³n   â”‚ LOW      â”‚ Mostrar mensaje  â”‚ Manual  â”‚
â”‚ ConexiÃ³n     â”‚ MEDIUM   â”‚ Esperar + reintentar â”‚ Auto 3x â”‚
â”‚ BD           â”‚ HIGH     â”‚ Notificar + log  â”‚ Manual  â”‚
â”‚ API Externa  â”‚ MEDIUM   â”‚ Usar cache       â”‚ Auto 5x â”‚
â”‚ Fatal        â”‚ CRITICAL â”‚ Apagar bot       â”‚ No      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## DIAGRAMA 10: ESCALABILIDAD - ROADMAP A 12 MESES

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ROADMAP DE ESCALABILIDAD Y EVOLUCIÃ“N              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

            MVP (Hoy)          â†’    ProducciÃ³n (12 meses)

SEMANAS 0-2: MVP BÃSICO
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ 5 pilares core â”‚
â”‚ â€¢ SQLite local   â”‚
â”‚ â€¢ 3 comandos bot â”‚
â”‚ â€¢ DocumentaciÃ³n  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
SEMANAS 2-4: FUNCIONALIDAD COMPLETA
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ + Indicadores tÃ©cnicos     â”‚
â”‚ + MÃ¡s comandos             â”‚
â”‚ + ValidaciÃ³n robusta       â”‚
â”‚ + 50% pruebas              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
SEMANAS 4-8: OPTIMIZACIÃ“N
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ + Cache inteligente        â”‚
â”‚ + ML bÃ¡sico                â”‚
â”‚ + API REST                 â”‚
â”‚ + Docker                   â”‚
â”‚ + CI/CD                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
SEMANAS 8-16: ESCALABILIDAD
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ + PostgreSQL               â”‚
â”‚ + Redis                    â”‚
â”‚ + Microservicios           â”‚
â”‚ + Load balancing           â”‚
â”‚ + Monitoreo                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
SEMANAS 16-52: PRODUCCIÃ“N
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ + Kubernetes               â”‚
â”‚ + Multi-cloud              â”‚
â”‚ + Analytics avanzado       â”‚
â”‚ + Dashboard web            â”‚
â”‚ + Equipo dedicado          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


COMPARATIVA:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Etapa    â”‚ BD      â”‚ Deploy â”‚ Escalas   â”‚ Users      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ MVP      â”‚ SQLite  â”‚ Local  â”‚ 1         â”‚ 1-5        â”‚
â”‚ Beta     â”‚ SQLite  â”‚ Cloud  â”‚ 10        â”‚ 5-100      â”‚
â”‚ Prod V1  â”‚ PG      â”‚ Docker â”‚ 100       â”‚ 100-1k     â”‚
â”‚ Prod V2  â”‚ PG+Redisâ”‚ K8s    â”‚ 1k+       â”‚ 1k-10k     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

Este documento proporciona una **representaciÃ³n visual completa** de la arquitectura.

Para implementar: Ir a **GUIA_REPLICACION_PASO_A_PASO.md**

